<template>
  <div class="elem" :id="item.classId">
    <div
      class="dragger"
      @mousedown.prevent="$emit('move', { event: $event, item })"
    ></div>
    <div class="elem-content">
      <h3>{{ item.content.title }}</h3>
      <p>{{ item.content.paragraph }}</p>
    </div>
    <div class="elements-actions">
      <div
        class="add-line"
        @click="$emit('addLine', item.classId)"
        v-if="!activeLine"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          version="1.1"
          id="Capa_1"
          x="0px"
          y="0px"
          viewBox="0 0 511.997 511.997"
          style="enable-background: new 0 0 511.997 511.997"
          xml:space="preserve"
        >
          <g transform="translate(1 1)">
            <g>
              <g>
                <path
                  d="M211.26,389.24l-60.331,60.331c-25.012,25.012-65.517,25.012-90.508,0.005c-24.996-24.996-24.996-65.505-0.005-90.496     l120.683-120.683c24.991-24.992,65.5-24.992,90.491,0c8.331,8.331,21.839,8.331,30.17,0c8.331-8.331,8.331-21.839,0-30.17     c-41.654-41.654-109.177-41.654-150.831,0L30.247,328.909c-41.654,41.654-41.654,109.177,0,150.831     c41.649,41.676,109.177,41.676,150.853,0l60.331-60.331c8.331-8.331,8.331-21.839,0-30.17S219.591,380.909,211.26,389.24z"
                />
                <path
                  d="M479.751,30.24c-41.654-41.654-109.199-41.654-150.853,0l-72.384,72.384c-8.331,8.331-8.331,21.839,0,30.17     c8.331,8.331,21.839,8.331,30.17,0l72.384-72.384c24.991-24.992,65.521-24.992,90.513,0c24.991,24.991,24.991,65.5,0,90.491     L316.845,283.638c-24.992,24.992-65.5,24.992-90.491,0c-8.331-8.331-21.839-8.331-30.17,0s-8.331,21.839,0,30.17     c41.654,41.654,109.177,41.654,150.831,0l132.736-132.736C521.405,139.418,521.405,71.894,479.751,30.24z"
                />
              </g>
            </g>
          </g>
        </svg>
      </div>
      <div
        class="remove-line"
        @click="$emit('removeLine', item.classId)"
        v-if="!activeLine && item.lines.lineTo"
      >
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 469.344 469">
          <path
            d="m368.21875 299.269531c-5.460938 0-10.921875-2.089843-15.082031-6.25-8.34375-8.339843-8.34375-21.824219 0-30.164062l43.09375-43.09375c19.648437-19.457031 30.441406-45.441407 30.441406-73.238281 0-57.152344-46.507813-103.679688-103.679687-103.679688-27.777344 0-53.761719 10.792969-73.171876 30.378906l-43.160156 43.15625c-8.339844 8.34375-21.824218 8.34375-30.164062 0-8.339844-8.339844-8.339844-21.824218 0-30.164062l43.09375-43.113282c27.433594-27.648437 64.171875-42.925781 103.402344-42.925781 80.703124 0 146.347656 65.644531 146.347656 146.347657 0 39.273437-15.277344 75.988281-43.03125 103.488281l-43.027344 43.007812c-4.160156 4.160157-9.601562 6.25-15.0625 6.25zm0 0"
          />
          <path
            d="m146.351562 469.511719c-80.703124 0-146.34765575-65.644531-146.34765575-146.347657 0-39.273437 15.27734375-75.988281 43.03124975-103.488281l43.027344-43.007812c8.34375-8.339844 21.824219-8.339844 30.167969 0 8.339843 8.339843 8.339843 21.824219 0 30.164062l-43.09375 43.09375c-19.671875 19.457031-30.464844 45.441407-30.464844 73.238281 0 57.152344 46.507813 103.679688 103.679687 103.679688 27.777344 0 53.761719-10.792969 73.171876-30.378906l43.160156-43.15625c8.339844-8.34375 21.824218-8.34375 30.164062 0 8.339844 8.339844 8.339844 21.824218 0 30.164062l-43.09375 43.117188c-27.433594 27.644531-64.167968 42.921875-103.402344 42.921875zm0 0"
          />
          <path
            d="m279.898438 210.949219c-5.460938 0-10.921876-2.089844-15.082032-6.25-8.339844-8.339844-8.339844-21.824219 0-30.164063l40.105469-40.105468c8.34375-8.34375 21.824219-8.34375 30.167969 0 8.339844 8.339843 8.339844 21.824218 0 30.164062l-40.109375 40.105469c-4.160157 4.160156-9.621094 6.25-15.082031 6.25zm0 0"
          />
          <path
            d="m149.339844 341.511719c-5.460938 0-10.925782-2.089844-15.082032-6.25-8.34375-8.34375-8.34375-21.824219 0-30.167969l40.105469-40.105469c8.339844-8.339843 21.824219-8.339843 30.164063 0 8.34375 8.339844 8.34375 21.824219 0 30.164063l-40.105469 40.109375c-4.160156 4.160156-9.621094 6.25-15.082031 6.25zm0 0"
          />
          <path
            d="m448.003906 469.511719c-5.460937 0-10.921875-2.089844-15.082031-6.25l-426.664063-426.667969c-8.34375-8.339844-8.34375-21.824219 0-30.164062 8.339844-8.34375 21.820313-8.34375 30.164063 0l426.667969 426.664062c8.339844 8.34375 8.339844 21.824219 0 30.167969-4.160156 4.160156-9.625 6.25-15.085938 6.25zm0 0"
          />
        </svg>
      </div>
      <div
        class="remove-element"
        @click="$emit('removeCollection', item.classId)"
        v-if="!activeLine"
      >
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="-40 0 427 427.00131">
          <path
            d="m232.398438 154.703125c-5.523438 0-10 4.476563-10 10v189c0 5.519531 4.476562 10 10 10 5.523437 0 10-4.480469 10-10v-189c0-5.523437-4.476563-10-10-10zm0 0"
          />
          <path
            d="m114.398438 154.703125c-5.523438 0-10 4.476563-10 10v189c0 5.519531 4.476562 10 10 10 5.523437 0 10-4.480469 10-10v-189c0-5.523437-4.476563-10-10-10zm0 0"
          />
          <path
            d="m28.398438 127.121094v246.378906c0 14.5625 5.339843 28.238281 14.667968 38.050781 9.285156 9.839844 22.207032 15.425781 35.730469 15.449219h189.203125c13.527344-.023438 26.449219-5.609375 35.730469-15.449219 9.328125-9.8125 14.667969-23.488281 14.667969-38.050781v-246.378906c18.542968-4.921875 30.558593-22.835938 28.078124-41.863282-2.484374-19.023437-18.691406-33.253906-37.878906-33.257812h-51.199218v-12.5c.058593-10.511719-4.097657-20.605469-11.539063-28.03125-7.441406-7.421875-17.550781-11.5546875-28.0625-11.46875h-88.796875c-10.511719-.0859375-20.621094 4.046875-28.0625 11.46875-7.441406 7.425781-11.597656 17.519531-11.539062 28.03125v12.5h-51.199219c-19.1875.003906-35.394531 14.234375-37.878907 33.257812-2.480468 19.027344 9.535157 36.941407 28.078126 41.863282zm239.601562 279.878906h-189.203125c-17.097656 0-30.398437-14.6875-30.398437-33.5v-245.5h250v245.5c0 18.8125-13.300782 33.5-30.398438 33.5zm-158.601562-367.5c-.066407-5.207031 1.980468-10.21875 5.675781-13.894531 3.691406-3.675781 8.714843-5.695313 13.925781-5.605469h88.796875c5.210937-.089844 10.234375 1.929688 13.925781 5.605469 3.695313 3.671875 5.742188 8.6875 5.675782 13.894531v12.5h-128zm-71.199219 32.5h270.398437c9.941406 0 18 8.058594 18 18s-8.058594 18-18 18h-270.398437c-9.941407 0-18-8.058594-18-18s8.058593-18 18-18zm0 0"
          />
          <path
            d="m173.398438 154.703125c-5.523438 0-10 4.476563-10 10v189c0 5.519531 4.476562 10 10 10 5.523437 0 10-4.480469 10-10v-189c0-5.523437-4.476563-10-10-10zm0 0"
          />
        </svg>
      </div>
      <div
        class="unit-line"
        v-if="activeLine && activeId !== item.classId"
        @click="$emit('unitLine', item.classId)"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          version="1.1"
          id="Capa_1"
          width="25"
          height="25"
          x="0px"
          y="0px"
          viewBox="0 0 511.997 511.997"
          style="enable-background: new 0 0 511.997 511.997"
          xml:space="preserve"
        >
          <g transform="translate(1 1)">
            <g>
              <g>
                <path
                  d="M211.26,389.24l-60.331,60.331c-25.012,25.012-65.517,25.012-90.508,0.005c-24.996-24.996-24.996-65.505-0.005-90.496     l120.683-120.683c24.991-24.992,65.5-24.992,90.491,0c8.331,8.331,21.839,8.331,30.17,0c8.331-8.331,8.331-21.839,0-30.17     c-41.654-41.654-109.177-41.654-150.831,0L30.247,328.909c-41.654,41.654-41.654,109.177,0,150.831     c41.649,41.676,109.177,41.676,150.853,0l60.331-60.331c8.331-8.331,8.331-21.839,0-30.17S219.591,380.909,211.26,389.24z"
                />
                <path
                  d="M479.751,30.24c-41.654-41.654-109.199-41.654-150.853,0l-72.384,72.384c-8.331,8.331-8.331,21.839,0,30.17     c8.331,8.331,21.839,8.331,30.17,0l72.384-72.384c24.991-24.992,65.521-24.992,90.513,0c24.991,24.991,24.991,65.5,0,90.491     L316.845,283.638c-24.992,24.992-65.5,24.992-90.491,0c-8.331-8.331-21.839-8.331-30.17,0s-8.331,21.839,0,30.17     c41.654,41.654,109.177,41.654,150.831,0l132.736-132.736C521.405,139.418,521.405,71.894,479.751,30.24z"
                />
              </g>
            </g>
          </g>
        </svg>
      </div>
    </div>
  </div>
</template>

<script>
export default {
  name: "ConnectionsItem",
  props: {
    item: {
      type: [Object, Array],
      default: () => [],
    },
    activeLine: {
      type: Boolean,
      default: false,
    },
    activeId: {
      type: String,
      default: "",
    },
  },
};
</script>

<style scoped>
.elements-actions svg {
  fill: #a7bdd3;
  width: 16px;
  height: 16px;
}

.elements-actions div {
  cursor: pointer;
  display: flex;
  align-items: center;
  padding: 5px 10px;
}

.elements-actions {
  position: absolute;
  align-items: center;
  justify-content: center;
  bottom: -27px;
  left: 50%;
  transform: translateX(-50%);
  background: #304254;
  border-radius: 3px;
  display: flex;
}

.elem {
  left: 50%;
  top: 40%;
  position: absolute;
  width: 200px;
  border: 1px solid #304254;
  height: 120px;
}

.dragger {
  width: 100%;
  height: 25px;
  background: #304254;
}

.elem-content {
  text-align: center;
}

.elem-content h3 {
  margin-top: 5px;
}

.elem-content p {
  margin-top: 30px;
  font-size: 14px;
  color: #5aa3d7;
}
</style>
